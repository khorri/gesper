<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  http://axelor.com/xml/ns/object-views/object-views_4.0.xsd">

    <grid name="employe-rh-grid" title="Fiche agent"
          model="com.axelor.rh.db.Employe">
        <field name="empNumber"/>
        <field name="firstname"/>
        <field name="lastname"/>
        <field name="lastname_ar"/>
        <field name="firstname_ar"/>
        <field name="cin"/>
        <field name="activated"/>
    </grid>

    <form name="employe-rh-form" title="Fiche agent"
          model="com.axelor.rh.db.Employe" width="large">

        <panel name="main">
            <panel colSpan="3">
                <field name="activated" hidden="true"/>
                <field name="id" hidden="true"/>
                <field name="picture" showTitle="false" colSpan="12" widget="Image"/>
                <field name="matricule" showTitle="false" colSpan="6" css="matricule hilite-success strong text-center" placeholder="Matricule">
                    <hilite background="danger" strong="true" if="!activated &amp;&amp; id!=null"/>
                </field>
            </panel>
            <panel colSpan="9">
                <field name="title" title="Titre" colSpan="1" selection="employee.title.type.select"/>
                <field name="firstname" colSpan="3" css="label-bold bold large" x-bind="{{firstname|uppercase}}"/>
                <field name="lastname" colSpan="2" css="label-bold bold large"/>
                <field name="lastnameAr" colSpan="2" css="label-bold bold large"/>
                <field name="firstnameAr" colSpan="3" css="label-bold bold large"/>
                <field name="sex" onChange="action-employee-change-sex" selection="employee.sex.type.select"/>
                <field name="sexAr" selection="employee.sexar.type.select"/>
            </panel>
        </panel>
        <panel name="coordonnee" title="Coordonnées">
            <field name="address" colSpan="12" canDelete="true" canNew="true" form-view="address-form" grid-view="address-grid"/>
            <field name="email" colSpan="3" placeholder="email@example.com" pattern="^[a-z0-9A-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9A-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ!#$%&amp;'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[a-z]{2,})$"/>
            <field name="fax" colSpan="3" placeholder="+21200000000" pattern="^\+?(?:[0-9]{2,3}(?:\s|\.)?){3,6}[0-9]{2,3}$"/>
            <field name="phone" colSpan="3" placeholder="+21200000000" pattern="^\+?(?:[0-9]{2,3}(?:\s|\.)?){3,6}[0-9]{2,3}$"/>
            <field name="mobile" colSpan="3" placeholder="+21200000000" pattern="^\+?(?:[0-9]{2,3}(?:\s|\.)?){3,6}[0-9]{2,3}$"/>
            <panel name="urgentContact" title="Contact d'urgence">
                <field name="urgentContactName"/>
                <field name="urgentContactPhone"/>
            </panel>
        </panel>
        <panel-tabs>
            <panel name="informations" title="Informations">
                <field name="cin" colSpan="2"/>
                <field name="cinImage" showTitle="false" colSpan="2" widget="binary-link" canNew="true" form-view="meta-files-form" grid-view="meta-files-grid"/>
                <field name="nationality" colSpan="2"/>
                <field name="birthday" colSpan="2"/>
                <field name="birthplace" colSpan="2"/>
                <field name="birthplaceAr" colSpan="2"/>

                <panel title="Info.professionnelles" colSpan="12">
                    <field name="hireDate" colSpan="3"/>
                    <field name="mutationDate" colSpan="3"/>
                    <field name="radiationDate" colSpan="3"/>
                    <field name="motifRadiation" colSpan="3"/>
                    <panel-related field="situationList" form-view="situation-rh-form" grid-view="situation-rh-grid" title="Situation Administrative"  colSpan="12"/>
                </panel>
            </panel>
            <panel name="affectation" title="Affectation &amp; Mutation">
                <panel-related field="affectationList" form-view="affectation-rh-form" grid-view="affectation-rh-grid" title="Historique des affactations"  colSpan="12"/>
            </panel>
            <panel name="affectation" title="Retraite/Mutuelle/AOS/MED">
                <panel title="Retraite" colSpan="12">
                    <panel-related field="retraite" form-view="retraite-rh-form" grid-view="retraite-rh-grid" title="Retraite"  colSpan="12"/>
                </panel>
                <panel title="Mutuelle" colSpan="12">
                    <panel-include view="mutuelle-rh-form" from="gesper-rh"></panel-include>
                </panel>

            </panel>
        </panel-tabs>

    </form>
    <action-record name="action-employee-change-sex" model="com.axelor.rh.db.Employe">
        <field if="sex == 'M'" name="sexAr" expr="M"/>
        <field if="sex == 'F'" name="sexAr" expr="F"/>
    </action-record>
    <action-record name="action-employee-change-sex-ar" model="com.axelor.rh.db.Employe">
        <field if="sexAr == 'M'" name="sex" expr="M"/>
        <field if="sexAr == 'F'" name="sex" expr="F"/>
    </action-record>


</object-views>